generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Aluno {
  id                 Int       @id @default(autoincrement())
  email              String
  nome               String
  senha              String    @db.VarChar(12)
  codigo_confirmacao String    @unique
  status             Boolean?
  reservas           Reserva[]

  @@unique([email, status])
  @@map("aluno")
}

model Professor {
  id                 Int      @id @default(autoincrement())
  email              String
  nome               String
  senha              String   @db.VarChar(12)
  codigo_confirmacao String   @unique
  status             Boolean?
  turmas             Turma[]

  @@unique([email, status])
  @@map("professor")
}

model Turma {
  id             Int       @id @default(autoincrement())
  id_lab         Int
  id_professor   Int
  curso          String
  data_turma     String
  horario_inicio String
  horario_fim    String
  reservas       Reserva[]
  professor      Professor @relation(fields: [id_professor], references: [id])

  @@unique([id_lab,data_turma, horario_inicio, horario_fim])
  @@map("turma")
}

model Reserva {
  id_turma   Int
  id_aluno   Int
  id_reserva Int    @id @default(autoincrement())
  computador String
  curso      String
  aluno      Aluno  @relation(fields: [id_aluno], references: [id])
  turma      Turma  @relation(fields: [id_turma], references: [id])

  @@unique([id_aluno, id_turma])
  @@map("reserva")
}
